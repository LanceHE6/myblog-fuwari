---
title: 转正答辩问题参考
description: 杭州宏杉学习笔记-转正答辩问题参考
#image: /cover/cover2.png
category: 杭州宏杉科技
tags:
- 答辩
  #sticky: 999
published: 2025-07-29
---

## 答辩问题组1

_以**裸金属**和**v2v迁移**为主_

* 1、裸金属模块有哪些功能？

```text
裸金属模块包含有裸金属集群、裸金属设备、裸金属主机、部署服务器、预配置模版以及回收站这六个功能模块
```

* 2、裸金属设备支持哪些操作？

```text
裸金属设备支持启用、停用、删除、查看属性、开机、重启、关闭电源、获取硬件信息、更新IPMI信息、打开控制台
```

3、QGA和DHCP有什么依赖关系吗？QGA和性能优化工具有什么关系？

```text
并无直接依赖关系，可以实现一些相同的功能。性能优化工具里面包含了QGA，
以修改主机名为例，安装性能优化工具之后则可以通过QGA去修改主机名
不安装性能优化工具的情况下，则可以通过DHCP去修改主机名。
```

4、通过南京明捷项目支持工作的经验中，可以补充那些测试用例来提高测试覆盖范围？

```text
①ESXI上使用的存储，增加覆盖NFS存储类型
②大规格的测试场景，例如V2V迁移测试验证源端云主机挂载2T的硬盘
③源端虚拟机的磁盘路径带特殊符号场景
④源端存储、目标端存储读写性能较差的场景覆盖
```

5、windows虚拟机迁移过来后无法正常进入系统，如何排查？

```text
①检查源端虚拟机是否可以正常运行
②检查迁移后的云主机的状态是否为运行中
③检查虚拟机的根盘、数据盘的挂载情况、大小、格式、类型等是否和源端虚拟机保持一致
④检查迁移后的虚拟机配置，例如CPU、内存、网卡类型与源环境是否保持一致
⑤打开云主机的控制台，观察是否是启动过程卡住或是其他类型，例如蓝屏、黑屏无响应等
```

6、MCMP测试和MCloud测试的区别是什么

```text
多云管平台主要是需要测试多个云平台之间的资源调度功能，同时还要验证与底层平台操作的一致性，多云管平台另外还需要测试对不同云平台的兼容性，测试复杂度高
而MCloud测试则是聚焦单一平台功能验证
```

7、 MCMP测试中如何确认是否有问题？

```text
①观察界面上的报错信息或者任务结果
②操作一致性检查，对比检查多云管平台上执行的操作与实际下发到底层平台上操作是否一致
③对比测试， 在多云管平台和底层平台执行同样的操作，确认是否为多云管平台独有问题
```

8、性能优化工具包含哪些？  mwatch有什么作用？

```text
性能优化工具包含内部监控agent、QGA、Virtio驱动、Cloudbase-Init以及Pvpanic驱动。
Virtio驱动又包含有硬盘驱动（vioscsi、viostor）、网卡驱动（NetKVM）、内存Balloon驱动、串口设备驱动（vioserial）、PCI设备驱动（virtio-pci）等
mwatch即mwatch-vm-agent服务， 是安装在云主机内部的代理，用于获取云主机CPU、内存和磁盘容量的内部监控数据
```

9、vmtools的作用是什么？ 与v2v测试过程中的什么功能强相关？

```text
①vmtools可以实现虚拟机的网络/存储性能优化、电源管理增强、提高虚拟硬件兼容性， 并且可以收集虚拟机详细监控信息
②在v2v迁移过程中，针对VMware的云主机，如果云主机未安装VMwareTools，系统会尝试通过vCenter执行云主机关闭电源操作。
如果云主机安装了VMware Tools，系统会通过VMwareTools引导云主机操作系统关机。
```

10、裸金属模块部署服务器的限制有哪些？需要划分空间吗？推荐做法是什么？

```text
要求如下：
①部署服务器挂载到裸金属集群中
②部署服务器仅支持复用管理节点
③要求部署服务器有足够的存储空间，保存用于PXE部署的镜像
④要求部署服务器连接到管理网络，与MCloud云平台的管理节点连通
⑤要求部署服务器连接到部署网络，与裸金属设备连通
⑥要求部署服务器上的DHCP监听网卡连接到部署网络，并保证该部署网络上不存在其他DHCP服务
需要创建存储路径，存储路径需要有足够的空间；推荐单独创建目录，不可复用系统目录 
```
 
 ## 答辩问题组2

_以**NTP**为主_

1、描述一个FT问题及定位结论

```text
FT云主机备云主机所在节点下电重启，FT云主机业务网络会出现中断，且恢复后可能会出现再次业务网络中断。因当时开发无时间定位，
位结论。
```

2、chrony守护进程、时间源和集群的关系

```text
集群中每个物理机都有chrony守护进程，master节点中的守护进程时间源设置为外部时间源；slave节点中的守护进程时间源指向的是master,
其余物理机守护进程时间源指向的是master和slave节点
```

3、时间源为什么要设置双备份，一个可以吗

```text
双备份是为了当其中一个管理节点挂了的时候，其他物理机还能依靠剩下的管理节点进行时间同步，确保集群内时间的一致性。只有一个
话，就没有冗余，当这个管理节点挂掉后，集群内就无法确保时间一致
```

4、两个管理节点都挂了，是否能同步

```text
不能，两个节点都挂了，集群内部处于一种无leader的状态，无法确保集群内时间一致
```

5、unixbench工具测试项在我们现在的工作中全面吗，重点关注哪项

```text
unixbench测试项覆盖比较全面，涵盖CPU性能，磁盘IO性能，内存速度等。重点可以关注CPU的整数和浮点数运算性能以及磁盘的IO性能
为这是整机计算性能测试工具，CPU，内存，存储等多方面都会影响得分，不能仅靠某项的分数判断CPU的性能
```

6、怎么解释单核和多核结果相反，是否合理

```text
一般在服务器CPU中，核心数越多，频率越低；核心数越少，频率则越高，单核分数更看重频率，多核分数看重核心数量。所以只针对单核
相反这个现象来讲是合理的。但测试机采用的是云平台上的云主机，测试结果会受CPU、内存、主存储、云平台上的其他云主机等因素影响，且
用例128C128G限制的影响，部分测试环境并没有达到资源独占。导致测试结果与实际结果可能存在出入
```

7、怎么结合结果对云主机进行调优

```text
可以先在物理机上进行跑分，在再相同配置的云主机上进行跑分。结合两个测试结果，分析云主机的性能损耗集中在哪一部分。
```

8、自动化测试在项目验证补丁做什么

```text
用于验证环境打完补丁后，云主机的基本功能是否正常
```

9、为什么需要NTP，没有会怎么样

```text
MCloud集群是通过多台服务器协同工作时，日志记录、事务处理、数据同步都需要统一的时间戳。如果时间不一致，可能会出现日志时序
版本冲突等问题。
```

10、老版本和新版本NTP有什么区别

```text
没有测试过老版本的NTP功能。同步的逻辑应该是相同的，只是老版本无法通过MCloud界面配置NTP
```

11、NTP为什么做缓慢同步

```text
如果步进同步的话，就会造成时间戳跳变，可能会引起日志时许错乱或数据版本冲突等问题
```

12、ntp时间和本地时间相差较大会怎么样，怎么实现ntp时间差的模拟？

```text
若只有1个ntp的话，即使与本地时间相差较大，仍会与之同步。通过创建不同的云主机，修改云主机的时间来模拟不同时差的ntp时间源
```

13、ntp时间源之间相差较大时会同步吗？没有重启mcloud服务就能同步？

```text
若时间源之间相差较大，chrony无法判断时间源的真伪，会放弃同步。mcloud服务与ntp服务没有直接关系，无需重启mcloud服务即可生效
```

14、mcloud和mdbs、ntp怎么配合

```text
若在MCloud中已配置ntp服务器，且mdbs被MCloud纳管的情况，mdbs的ntp会以MCloud端为准
```

15、先配置mdbs的ntp再配置MCloud的ntp，chrony.conf怎么变化，有没有看里面的注释

```text
没有将MCloud和mdbs进行联合测试过。观察过配置文件中的配置项，但没有仔细查看注释
```

16、时间跨度多大才会采用步进同步？

```text
默认是大于1秒采用步进同步，由/etc/chrony.conf文件中的makestep参数控制
```

17、怎么模拟时间不一致和ntp服务器失联的情况，ntp同步走什么协议

```text
通过创建不同的云主机，修改云主机的时间来模拟不同时差的ntp时间源；通过关机云主机来模拟ntp节点失联。暂未了解过ntp同步采用什么协议
```

18、自动化测试用例痛点，有什么优化的想法

```text
每次自动化测试时，修改配置文件比较繁琐，且如果一个配置出错，可能导致全部用例失败。可以在执行用例前，增加参数校验的操作。
```

19、陕西高速数据库不一致原因，必现步骤

```text
只参与验证打补丁后环境的基本功能，未实际了解问题原因。
```

20、zstack和MCloud两个产品已关机的云主机当前所在物理机是否显示一致，有没有了解过为什么不一致，有没有进行发散测试

```text
zstack与MCloud已关机的云主机当前所在物理机显示不一致。zstack显示的是上次启动所在的物理机，MCloud显示为空。只知道最初MC
zstack一致，显示为上次所在物理机，后面改成显示为空。具体原因未了解过。发现这个问题后，尝试检查了云资源-物理机中的云主机子页签
显示，查看是否会因为当前所在物理机为空而不显示已关机云主机。但经检查没有问题
```

21、NTP时间源之前偏差多少算大？

```text
偏差大小由/etc/chrony.conf文件中的maxdistance参数控制，默认为0.05秒即50ms
```

22、两个时间源接近但和本地相差较大，算正常吗？

```text
正常，即使时间源与本地相差较大，但两个时间源接近仍会与它们两个的平均值进行同步
```

23、时间源最多选几个？

```text
在MCloud界面上最多支持3个时间源，底层chrony无数量限制
```

24、3个都不一致，向谁同步？

```text
3个时间源都不一致时，chrony无法裁决时间源的真伪，会放弃同步
```